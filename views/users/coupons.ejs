<%- include('../layouts/header') %>

<style>
  .path a {
      margin-bottom: 5px;
      color: #000;
      text-decoration: none;
  }

  .path a:hover {
      color: red;
      transition-duration: 0.6s;
  }

  .path {
      font-family: Montserrat, sans-serif;
      font-size: 19px;
      text-align: left;
      margin-right: auto;
      margin-top: 10px;
  }

  .coupon-item {
      border: 1px solid #ddd;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 5px;
      background-color: #f9f9f9;
  }

  .coupon-item h4 {
      margin-bottom: 10px;
      color: #333;
  }

  .coupon-item p {
      margin-bottom: 5px;
      color: #555;
  }

  .coupon-item .expiry {
      font-weight: bold;
      color: #d9534f;
  }

  .breadcrumb__links a {
      margin-right: 5px;
      text-decoration: none;
      color: #000;
  }

  .breadcrumb__links a:hover {
      color: red;
  }
</style>
</head>
<body>

<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="breadcrumb__links">
          <a href="/"><i class="fa fa-home"></i> Home</a>
          <a href="#"><i></i><i></i>  <span>My Coupons</span></a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Breadcrumb End -->

<!-- Personal Info and Coupons Section Begin -->
<section class="checkout spad">
  <div class="container">
    <div class="row">
      <!-- Sidebar Navigation -->
      <div class="col-lg-4">
        <div class="path">
          <div class="l">
            <a href="/profile">Personal Information</a>
          </div>
          <p class="text-secondary text-muted">____________________________</p>
          <div>
            <a href="/myorders">My Orders</a>
          </div>
          <p class="text-secondary text-muted">____________________________</p>
          <div>
            <a href="/address">Address</a>
          </div>
          <p class="text-secondary text-muted">____________________________</p>
          <div>
            <a href="/wallet">Wallet</a>
          </div>
          <p class="text-secondary text-muted">____________________________</p>
          <div>
            <a href="/coupons" style="color: red;">My Coupons</a>
          </div>
          <p class="text-secondary text-muted">____________________________</p>
          <div>
            <a href="#" id="changePasswordBtn">Change Password</a>
          </div>
          <p class="text-secondary text-muted">____________________________</p>
          <div>
            <a href="/refferal">Referral</a>
          </div>
          <p class="text-secondary text-muted">____________________________</p>
        </div>
      </div>

      <!-- Personal Information and Coupons Content -->
      <div class="col-lg-8">
        <h5 class="d-flex justify-content-center" style="font-weight: bold;">My Coupons</h5>
        <br>
        <hr>
        <br>
        <div class="coupons">
          <% couponData.forEach(coupon => { %>
            <div class="coupon-item">
              <h4>Coupon Code: <%= coupon.code %></h4>
              <% if (coupon.discountType === 'percentage') { %>
                <p>Discount: <%= coupon.discountValue %>%</p>
              <% } else if (coupon.discountType === 'fixed') { %>
                <p>Discount: â‚¹<%= coupon.discountValue %></p>
              <% } %>
              <p>Validity: <%= new Date(coupon.validity).toLocaleDateString() %></p>
              <% if (new Date(coupon.validity) < new Date()) { %>
                <p class="expiry" style="color: red;">Expired</p>
              <% } else { %>
                <p class="expiry" style="color: green;">Valid</p>
              <% } %>
            </div>
          <% }); %>
          
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Personal Info and Coupons Section End -->

<%- include('../layouts/footer') %>

<!-- Include jQuery and Bootstrap JavaScript at the end of the body to ensure they are loaded after the DOM is ready -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom JavaScript to handle the modal trigger -->
<script>
$(document).ready(function () {
  $('#changePasswordBtn, #changePasswordBtnSidebar').click(function () {
    $('#changePasswordModal').modal('show');
  });
});
</script>
</body>
</html>
